{"remainingRequest":"D:\\Git\\pmdb-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\pmdb-vue\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Git\\pmdb-vue\\src\\store\\modules\\users.js","dependencies":[{"path":"D:\\Git\\pmdb-vue\\src\\store\\modules\\users.js","mtime":1591205575884},{"path":"D:\\Git\\pmdb-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Git\\pmdb-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Git\\pmdb-vue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkw7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpIHx8IG51bGwsCiAgcm9sZXM6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyb2xlcycpIHx8IG51bGwsCiAgdXNlcm5hbWU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpIHx8IG51bGwsCiAgdXNlcjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKSB8fCBudWxsLAogIHVzZXJzOiBbXQp9Owp2YXIgZ2V0dGVycyA9IHsKICBsb2dnZWRJbjogZnVuY3Rpb24gbG9nZ2VkSW4oc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS50b2tlbiAhPT0gbnVsbDsKICB9LAogIGdldFRva2VuOiBmdW5jdGlvbiBnZXRUb2tlbihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnRva2VuOwogIH0sCiAgZ2V0VXNlcm5hbWU6IGZ1bmN0aW9uIGdldFVzZXJuYW1lKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudXNlcm5hbWU7CiAgfSwKICBnZXRSb2xlczogZnVuY3Rpb24gZ2V0Um9sZXMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5yb2xlczsKICB9LAogIGdldFVzZXJzOiBmdW5jdGlvbiBnZXRVc2VycyhzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXJzOwogIH0sCiAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICByZXRyaWV2ZVRva2VuOiBmdW5jdGlvbiByZXRyaWV2ZVRva2VuKGNvbnRleHQsIGNyZWRlbnRpYWxzKSB7CiAgICByZXR1cm4gYXhpb3MucG9zdCgnL2F1dGgvc2lnbmluJywgewogICAgICB1c2VybmFtZTogY3JlZGVudGlhbHMudXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkOiBjcmVkZW50aWFscy5wYXNzd29yZAogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjY2Vzc190b2tlbicsIHJlc3BvbnNlLmRhdGEuYWNjZXNzVG9rZW4pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncm9sZXMnLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLnJvbGVzKSk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VybmFtZScsIHJlc3BvbnNlLmRhdGEudXNlcm5hbWUpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgY29udGV4dC5jb21taXQoJ3NldFRva2VuJywgcmVzcG9uc2UuZGF0YS5hY2Nlc3NUb2tlbik7CiAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRSb2xlcycsIHJlc3BvbnNlLmRhdGEpOwogICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcm5hbWUnLCByZXNwb25zZS5kYXRhLnVzZXJuYW1lKTsKICAgICAgY29udGV4dC5jb21taXQoJ3NldFVzZXInLCByZXNwb25zZS5kYXRhKTsKICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgfSk7CiAgfSwKICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoY29udGV4dCwgZGF0YSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgYXhpb3MucG9zdCgnL2F1dGgvc2lnbnVwJywgewogICAgICAgIHVzZXJuYW1lOiBkYXRhLnVzZXJuYW1lLAogICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLAogICAgICAgIHBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7IC8vY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7IC8vY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBkZXN0cm95VG9rZW46IGZ1bmN0aW9uIGRlc3Ryb3lUb2tlbihjb250ZXh0KSB7CiAgICAvLyBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgY29udGV4dC5nZXR0ZXJzLmdldFRva2VuCiAgICBpZiAoY29udGV4dC5nZXR0ZXJzLmxvZ2dlZEluKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICAgIGNvbnRleHQuY29tbWl0KCdkZXN0cm95VG9rZW4nKTsKICAgIH0KICB9LAogIGZldGNoQWxsVXNlcnM6IGZ1bmN0aW9uIGZldGNoQWxsVXNlcnMoY29udGV4dCkgewogICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIGNvbnRleHQuZ2V0dGVycy5nZXRUb2tlbjsKICAgIHJldHVybiBheGlvcy5nZXQoJy9hdXRoL3VzZXJzJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgY29udGV4dC5jb21taXQoJ3NldFVzZXJzJywgcmVzcG9uc2UuZGF0YSk7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0pOwogIH0KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgc2V0Um9sZXM6IGZ1bmN0aW9uIHNldFJvbGVzKHN0YXRlLCByb2xlcykgewogICAgc3RhdGUucm9sZXMgPSByb2xlczsKICB9LAogIHNldFVzZXJuYW1lOiBmdW5jdGlvbiBzZXRVc2VybmFtZShzdGF0ZSwgdXNlcm5hbWUpIHsKICAgIHN0YXRlLnVzZXJuYW1lID0gdXNlcm5hbWU7CiAgfSwKICBzZXRVc2VyczogZnVuY3Rpb24gc2V0VXNlcnMoc3RhdGUsIHVzZXJzKSB7CiAgICBzdGF0ZS51c2VycyA9IHVzZXJzOwogIH0sCiAgZGVzdHJveVRva2VuOiBmdW5jdGlvbiBkZXN0cm95VG9rZW4oc3RhdGUpIHsKICAgIHN0YXRlLnRva2VuID0gbnVsbDsKICB9LAogIHNldFVzZXI6IGZ1bmN0aW9uIHNldFVzZXIoc3RhdGUsIHVzZXIpIHsKICAgIHN0YXRlLnVzZXIgPSB1c2VyOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["D:/Git/pmdb-vue/src/store/modules/users.js"],"names":["axios","defaults","baseURL","process","env","VUE_APP_API_URL","state","token","localStorage","getItem","roles","username","user","JSON","parse","users","getters","loggedIn","getToken","getUsername","getRoles","getUsers","getUser","actions","retrieveToken","context","credentials","post","password","then","response","setItem","data","accessToken","stringify","commit","register","Promise","resolve","reject","email","catch","error","destroyToken","removeItem","fetchAllUsers","headers","common","get","console","log","mutations","setToken","setRoles","setUsername","setUsers","setUser"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\n\r\naxios.defaults.baseURL = process.env.VUE_APP_API_URL\r\n\r\nconst state = {\r\n    token: localStorage.getItem('access_token') || null,\r\n    roles: localStorage.getItem('roles') || null,\r\n    username: localStorage.getItem('username') || null,\r\n    user: JSON.parse(localStorage.getItem('user')) || null,\r\n    users: []\r\n};\r\n\r\nconst getters = {\r\n    loggedIn: state => state.token !== null,\r\n    getToken: state => state.token,\r\n    getUsername: state => state.username,\r\n    getRoles: state => state.roles,\r\n    getUsers: state => state.users,\r\n    getUser: state => state.user\r\n};\r\n\r\nconst actions = {\r\n    retrieveToken(context, credentials) {\r\n        return axios.post('/auth/signin', {\r\n            username: credentials.username,\r\n            password: credentials.password,\r\n        })\r\n            .then(response => {\r\n                localStorage.setItem('access_token', response.data.accessToken)\r\n                localStorage.setItem('roles', JSON.stringify(response.data.roles))\r\n                localStorage.setItem('username', response.data.username)\r\n                localStorage.setItem('user', JSON.stringify(response.data))\r\n                context.commit('setToken', response.data.accessToken)\r\n                context.commit('setRoles', response.data)\r\n                context.commit('setUsername', response.data.username)\r\n                context.commit('setUser', response.data)\r\n                return response\r\n            })\r\n    },\r\n    register(context, data) {\r\n        return new Promise((resolve, reject) => {\r\n            axios.post('/auth/signup', {\r\n                username: data.username,\r\n                email: data.email,\r\n                password: data.password,\r\n            })\r\n                .then(response => {\r\n\r\n                    resolve(response)\r\n                    //console.log(response)\r\n                })\r\n                .catch(error => {\r\n                    reject(error)\r\n                    //console.log(error)\r\n                })\r\n        })\r\n    },\r\n    destroyToken(context) {\r\n        // axios.defaults.headers.common['Authorization'] = 'Bearer ' + context.getters.getToken\r\n        if (context.getters.loggedIn) {\r\n            localStorage.removeItem('user')\r\n            context.commit('destroyToken')\r\n        }\r\n    },\r\n    fetchAllUsers(context) {\r\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + context.getters.getToken\r\n        return axios.get('/auth/users')\r\n            .then(response => {\r\n                context.commit('setUsers', response.data)\r\n                console.log(response.data)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n};\r\n\r\nconst mutations = {\r\n    setToken(state, token) {\r\n        state.token = token\r\n    },\r\n    setRoles(state, roles) {\r\n        state.roles = roles\r\n    },\r\n    setUsername(state, username) {\r\n        state.username = username\r\n    },\r\n    setUsers(state, users) {\r\n        state.users = users\r\n    },\r\n    destroyToken(state) {\r\n        state.token = null\r\n    },\r\n    setUser(state, user) {\r\n        state.user = user\r\n    }\r\n};\r\n\r\nexport default {\r\n    state,\r\n    getters,\r\n    actions,\r\n    mutations\r\n}"]}]}